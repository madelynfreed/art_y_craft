
<html>
<head>
	<style>
		.scene {
			width: 200px;
			height: 200px;
			perspective: 600px;
			position: absolute;
			top: 1000px;
			left:1000px;
		}

		.cube {
			width: 100%;
			height: 100%;
			position: relative;
			transform-style: preserve-3d;
			transition: transform 1s;
		}

		.cube__face {
			position: absolute;
			width: 200px;
			height: 200px;
			/* opacity: 40%; */
		}

		.cube__face--front {
			transform: rotateX(-45deg) rotateY(0deg) translateZ(100px);
		}

		.cube__face--right {
			transform: rotateX(45deg) rotateY(90deg) translateZ(100px);
		}

		.cube__face--back {
			transform: rotateX(135deg) rotateY(0deg) translateZ(100px);
			background-color: rgb(238, 236, 120); 
		}

		.cube__face--left {
			transform: rotateX(-45deg) rotateY(-90deg) translateZ(100px);
			background-color: rgb(129, 241, 94); 
		}

		.cube__face--top {
			transform: rotateX( 45deg) rotateY(0deg) translateZ(100px);
		}

		.cube__face--bottom {
			transform: rotateX(-135deg) rotateY(0deg) translateZ(100px);
			background-color: rgb(163, 69, 93); 
		}

		.cube.show-front  { transform: translateZ(-100px) rotateY(  0deg); }
		.cube.show-right  { transform: translateZ(-100px) rotateY( -90deg); }
		.cube.show-back   { transform: translateZ(-100px) rotateY(-180deg); }
		.cube.show-left   { transform: translateZ(-100px) rotateY(  90deg); }
		.cube.show-top    { transform: translateZ(-100px) rotateX( -90deg); }
		.cube.show-bottom { transform: translateZ(-100px) rotateX(  90deg); }

		</style>
		</head>
<body>
	<div class="scene">
		<div class="cube">
			<div class="cube__face cube__face--front">front</div>
			<div class="cube__face cube__face--back">back</div>
			<div class="cube__face cube__face--right">right</div>
			<div class="cube__face cube__face--left">left</div>
			<div class="cube__face cube__face--top">top</div>
			<div class="cube__face cube__face--bottom">bottom</div>
		</div>
	</div>
	<script>
		var cube = document.querySelector('.cube');
		var counter = 0;
		const directionList = ['front', 'right', 'back', 'left', 'top', 'bottom'];

		function changeSide() {
			var currentClass = 'show-' + directionList[counter];
			cube.classList.remove(currentClass)
			counter = (counter + 1)%6;
			var showClass = 'show-' + directionList[counter];
			cube.classList.add(showClass);
		}

		// document.addEventListener('click', changeSide);
		function appendDiv(x,y) {
			const shadowTag = document.createElement('div');
			shadowTag.style = `
				background-color: blue;
				height: 10px;
				width: 10px;
				position: absolute;
				top: ${y}px;
				left: ${x}px;
			`
			document.body.appendChild(shadowTag);
		}

		function getCoordinate([cube_side, ySide],[other_cube_side, xSide]) {
			const yelement = document.querySelector(`.cube__face--${cube_side}`);
			const r = yelement.getBoundingClientRect()
			const y = Math.round(r[ySide])

			const xelement = document.querySelector(`.cube__face--${other_cube_side}`);
			const s = xelement.getBoundingClientRect()
			const x = Math.round(s[xSide])

			appendDiv(x,y)
			return {x,y}
		}

		function getLightSource(coordinates, yDiff) {
			console.log(coordinates)
			const x = coordinates.x+500;
			const y = coordinates.y+yDiff;
			appendDiv(x,y)
			return {x,y}
		}

			function getIntersectionCoordinates(
				lightSource,
				coordinateTop,
				lightBottom,
				coordinateBottom,
			) {
				// const { lightSourceX, lightSourceY } = lightSource
				// { coordinateTopX, coordinateTopY },
				// { lightBottomX, lightBottomY },
				// { coordinateBottomX, coordinateBottomY },
				const lightSourceX = lightSource.x
				const lightSourceY = lightSource.y
				const coordinateTopX = coordinateTop.x
				const coordinateTopY = coordinateTop.y
				const lightBottomX = lightBottom.x
				const lightBottomY = lightBottom.y
				const coordinateBottomX = coordinateBottom.x
				const coordinateBottomY = coordinateBottom.y
				const m1 = (lightSourceY-coordinateTopY)/(lightSourceX-coordinateTopX)
				const m2 = (lightBottomY-coordinateBottomY)/(lightBottomX-coordinateBottomX)
				console.log(m1, m2)
				const b1 = lightSourceY - (m1 * lightSourceX)
				const b2 = lightSourceY - (m2 * lightSourceX)
				console.log(b1,b2)
				console.log(`y = ${m1}x + ${b1}`)
				console.log(`y = ${m2}x + ${b2}`)
				const x = (b2-b1)/(m1-m2)
				const y = m1 * x + b1
				console.log(x,y)
			// const x = 100
			// const y = 100
			appendDiv(x,y)
			return {x,y}
		}
		const b1 = getCoordinate(['bottom','bottom'],['bottom','left'])
		const b2 = getCoordinate(['bottom','top'],['left','right'])
		const b3 = getCoordinate(['bottom','top'],['right','left'])
		const t1 = getCoordinate(['front','top'],['front','left'])
		const t2 = getCoordinate(['back','top'],['back','left'])
		const t3 = getCoordinate(['back','top'],['back','right'])

		const lt = getLightSource(t3, -100)
		const lb = getLightSource(t3, 400)

		const intersection1 = getIntersectionCoordinates(lt, t1, lb, b1);
	</script>
</body>

</html>